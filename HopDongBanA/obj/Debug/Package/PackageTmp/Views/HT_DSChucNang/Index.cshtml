@model IEnumerable<HopDongMgr.Models.HT_DSChucNang>

@{
    ViewBag.Title = "DANH SÁCH CHỨC NĂNG";
    ViewBag.ThongBaoXoa = "Bạn có chắc chắn muốn xóa chức năng này không?";
}

<div class="box-header">
    <input type="button" value="Thêm mới" class="btn btn-info" onclick="location.href='@Url.Action("Create")'" />
    <input type="button" value="Cập nhật" class="btn btn-warning" id="btnCapNhat" />
    <input type="button" value="Xóa" class="btn btn-danger" id="btnXoa" data-toggle="modal" data-target="#modal-danger" />
    <input type="button" value="Cập nhật tự động" class="btn btn-success" onclick="location.href='@Url.Action("RefreshBusiness")'" />
</div>
<div>
    @Html.Raw(TempData["err"])
</div>
<table id="example" data-parameter="ColDef" class="display dataTable" cellspacing="0" role="grid" aria-describedby="example_info" style="width: 100%;">
    <thead>
        <tr>
            <th>Tên controller</th>
            <th>Tên Action</th>
            <th>Tên hiển thị</th>
            <th>Tên menu</th>
            <th>Số thứ tự</th>
            <th>Chức năng cha</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
            {
            <tr role="row" id="@item.oid">
                <td class="sorting_1">
                    @Html.DisplayFor(modelItem => item.TenController)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TenAction)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TenHienThi)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TenMenu)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.STT)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.HT_DSChucNang2.TenMenu)
                </td>
            </tr>
        }
    </tbody>
</table>
@*<script>
        var table = $('#dsChucNang').DataTable({
            language: {
                url: "//cdn.datatables.net/plug-ins/1.10.15/i18n/Vietnamese.json"
            },
            select: true,
            columnDefs: [
                { targets: [2, 3], width: '20%' }
            ]
        });

        $('#btnDongYChucNang').click(function () {
            var idSelected = $("#dsChucNang .selected").attr("id");
            if (idSelected != undefined) {
                Loading();
                $.ajax({
                    method: 'POST',
                    url: '@Url.Action("Delete")',
                    data: { id: idSelected },
                    success: function (data) {
                        $('#example').DataTable().row('.selected').remove().draw(false);
                        LoadingHide();
                    }
                })
            }
        });

        $('#btnCapNhatChucNang').click(function () {
            var idSelected = $("#dsChucNang .selected").attr("id");
            if (idSelected != undefined) {
                var url = '@Url.Action("Edit", new { id = "_TOREPLACE_" })';
                url = url.replace('_TOREPLACE_', idSelected);
                window.location.href = url;
            }
        });
    </script>*@